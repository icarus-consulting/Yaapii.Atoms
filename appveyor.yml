#------------------------------------------------------------#
#     CI Build Configuration for master branch pre-release   #
#------------------------------------------------------------#
version: 1.0.{build}
image: Visual Studio 2017
configuration: Release
# Automatically register private account and/or project AppVeyor NuGet feeds.
nuget:
  account_feed: true
build_script:
- ps: .\build.ps1
test: off
artifacts:
- path: '.\artifacts\**\*.nupkg'
deploy:
  - provider: NuGet
    name: MyGet Feed
    on:
      branch: master
      appveyor_repo_tag: true
    server: https://www.myget.org/F/icarus/api/v2/package
    api_key:
      secure: kckDJNTk6STPsPjJuZy9XNHsgdFSKE3mM6XZRuEZz4rmPbvoOICtScXsc3Ye6Uvw
    skip_symbols: false
    symbol_server: https://www.myget.org/F/icarus/symbols/api/v2/package
    artifact: /.*\.nupkg/
  - provider: NuGet
    name: AppVeyor Feed
    on:
      branch: master # Deploy only on master branch
      
    server: https://ci.appveyor.com/nuget/icarus
    api_key:
      secure: wVt1RgJAnhNTyIjtK9yFkQbEEM+fBk1TLUzo0j3pe2U=
    skip_symbols: true
    artifact: /.*\.nupkg/
  - provider: NuGet
    name: Nuget feed
    on:
      branch: master
      appveyor_repo_tag: true
    api_key:
      secure: AuUbKCY+YVcotkpwDEqZMGpK3G64913kOq3+Xt9DYBCZbdADh/xYvHHatjirUpy/
    skip_symbols: false
    artifact: /.*\.nupkg/

